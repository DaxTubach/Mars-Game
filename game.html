<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Test Mars Game</title>
  <link href="css/game.css" rel="stylesheet">
  <link rel="icon" href="favicon.ico" type="image/x-icon" />
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-97188606-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-97188606-1');
  </script>



</head>

<body>
  <!--Required scripts-->
  <script src="//cdnjs.cloudflare.com/ajax/libs/seedrandom/2.4.3/seedrandom.min.js"></script>
  <script src="scripts/howler.core.js"></script>
  <script src="scripts/pixi.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.8.2/firebase.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.8.2/firebase-firestore.js"></script>

  <!--Our scripts-->
  <script type="text/javascript" src="auth.js"></script>
  <script src="scripts/keyboard.js"></script>
  <script src="scripts/game_world.js"></script>
  <script src="scripts/main.js"></script>
  <style>
    * {
      padding: 0;
      margin: 0
    }
  </style>

  <div class="hud-container" id="people">
    <img class="hud-icon" src="images/people-icon.png">
  </div>
  <div class="hud-container" id="equipment">
    <img class="hud-icon" src="images/mining-icon-white.png">
  </div>
  <div class="hud-container" id="structures">
    <img class="hud-icon" src="images/structure-icon.png">
  </div>

  <div class="hud-menu"></div>

  <div class="dilemma-popup"></div>

  <!-- HUD UI Functions -->
  <script>
    // Equipment Objects
    let SolarPanel = {
      name: 'Solar Panel',
      icon: 'images/solar-panel-icon.png'
    }

    // Structure Objects
    let Headquarters = {
      name: 'Headquarters',
      icon: 'images/HQ-icon.png'
    }

    let Greenhouse = {
      name: 'Greenhouse',
      icon: 'images/greenhouse-icon.png'
    }

    let MedBay = {
      name: 'Med Bay',
      icon: 'images/med-bay-icon.png'
    }

    let SolarPanelArray = {
      name: 'Solar Panel Array',
      icon: 'images/solar-panel-array-icon.png'
    }

    let PowerGenerator = {
      name: 'Generator',
      icon: 'images/generator-icon.png'
    }

    let FoodStorage = {
      name: 'Food Storage',
      icon: 'images/food-storage-icon.png'
    }

    let ScienceLab = {
      name: 'Science Lab',
      icon: 'images/science-lab-icon'
    }

    // Arrays - Dynamically modifying these arrays will dynamically populate the HUD
    let people = [
      "Volvo Saab",
      "Tokyo Juan",
      "Stratos Blue"
    ];

    let equipmentArray = [
      SolarPanel
    ];

    let structuresArray = [
      Headquarters,
      Greenhouse,
      MedBay,
      SolarPanelArray,
      PowerGenerator,
      FoodStorage,
      ScienceLab
    ];


    $('.hud-container').hover(
      function () {
        displayHudMenu();
        emptyHudMenu();

        let hoveredSection = getHoveredSection(this);

        if (hoveredSection == 'people') {
          populateMenuWithPeople();
        }

        if (hoveredSection == 'equipment') {
          populateMenuWithEquipment();
        }

        if (hoveredSection == 'structures') {
          populateMenuWithStructures();
        }
      },
      function () {
        $('.hud-menu').css('display', 'none');
      }
    );

    $('.hud-menu').hover(
      function () {
        $('.hud-menu').css('display', 'flex');
      },
      function () {
        $('.hud-menu').css('display', 'none');
      }
    );

    function getHoveredSection(section) {
      return $(section).attr('id');
    };

    function displayHudMenu() {
      $('.hud-menu').css('display', 'flex');
    }

    function emptyHudMenu(section) {
      $('.hud-menu').empty();
    }

    function populateMenuWithPeople() {
      for (let i = 0; i < people.length; i++) {
        $('.hud-menu').append(
          '<div class="hud-menu-container">' +
          '<img src="images/people-icon.png" class="hud-menu-icon"/>' +
          '<p>' + people[i] + '</p>' +
          '</div>'
        );
      }
    }

    function populateMenuWithEquipment() {
      for (let i = 0; i < equipmentArray.length; i++) {
        $('.hud-menu').append(
          '<div class="hud-menu-container">' +
          '<img src="' + equipmentArray[i].icon + 'class="hud-menu-icon"/>' +
          '<p>' + equipmentArray[i].name + '</p>' +
          '</div>'
        );
      }
    }

    function populateMenuWithStructures() {
      for (let i = 0; i < structuresArray.length; i++) {
        $('.hud-menu').append(
          '<div class="hud-menu-container">' +
          '<img src="' + structuresArray[i].icon + 'class="hud-menu-icon"/>' +
          '<p>' + structuresArray[i].name + '</p>' +
          '</div>'
        );
      }
    }
  </script>

  <!-- Dilemma UI Functions -->
  <script>
    // Dilemma Objects
    let FreezingToDeath = {
      name: 'Freezing To Death',
      info: `- Mars has a very similar axial tilt creating seasons on Mars allowing for temperature to then be varied by the season itself as well as by location and time of day.       
- The average weather on Mars is -81 degrees Fahrenheit. 
- The highest temperature is located near the equator about 86 degrees Fahrenheit and -284 degrees by the Martian poles.`,
    }

    // Dilemma Array - Contains every Dilemma that can be chosen randomly to display to user
    let dilemmas = [
      FreezingToDeath
    ];

    let dilemmaCount = numberOfDilemmas();
    let chosenDilemma = chooseRandomDilemma(dilemmaCount);

    // Temporary function to display Dilemma Popup after 5 sec
    setTimeout(function () {
      displayDilemmaPopup(chosenDilemma);
    }, 5000);

    function numberOfDilemmas() {
      return dilemmas.length;
    }

    function chooseRandomDilemma(count) {
      return Math.floor(Math.random() * count);
    }

    function displayDilemmaPopup(chosen) {
      emptyDilemmaPopup();
      $('.dilemma-popup').css('display', 'block');

      displayDilemmaTitle(dilemmas[chosen].name);
      displayDilemmaInfo(dilemmas[chosen].info);
    }

    function emptyDilemmaPopup() {
      $('.dilemma-popup').empty();
    }

    function displayDilemmaTitle(dilemmaName) {
      $('.dilemma-popup').append(
        '<h1>' + dilemmaName + '</h1>'
      );
    }

    function displayDilemmaInfo(dilemmaInfo) {
      $('.dilemma-popup').append(
        '<p>' + dilemmaInfo + '</p>'
      );
    }

    // Temporary function to hide Dilemma Popup on click
    $('.dilemma-popup').click(function () {
      $('.dilemma-popup').css('display', 'none');
    });
  </script>
</body>

</html>